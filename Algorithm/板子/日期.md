其他可能的参考：E3H，E4C


Zeller公式
int zeller(int y,int m,int d) //根据日期判断周几（公式法），y为年，m为月，d为日
{
    if (m < 3) {
        y--;
        m += 12;
    }
    int c = y / 100;
    y = y % 100;
    int w = (y + y / 4 + c / 4 - 2 * c
             + (26 * (m + 1)) / 10 + d - 1) % 7;
    if (w < 0) w += 7;
    return w;
}

每月天数
int Dayspermonth(int y,int m)
{
    if(((y%4==0&&y%100!=0)||y%400==0)&&m==2){
        return 29;
    }else if(m==1||m==3||m==5||m==7||m==8||m==10||m==12){
        return 31;
    }else if(m==2){
        return 28;
    }else{
        return 30;
    }
}

闰年判断
int isleapyear(int y)
{
    if (y%400==0 || (y%4==0 && y%100!=0))
        return 1;
    else
        return 0;
}

两日期相差天数(相减加一)
//还不是很完善，要加绝对值
int betweendays(int y1,int m1,int d1,int y2,int m2,int d2)
{
    int months[2][13]={31,31,28,31,30,31,30,31,31,30,31,30,31,
                       31,31,29,31,30,31,30,31,31,30,31,30,31};
    int sum=0;
    if (y1==y2)
    {
        if (m1==m2)
        {
            sum+=d2-d1;
        } else{
            sum+=months[isleapyear(y1)][m1]-d1;
            for (int i = m1+1; i < m2; ++i) {
                sum+=months[isleapyear(y1)][i];
            }
            sum+=d2;
        }
    } else{
        sum+=months[isleapyear(y1)][m1]-d1;
        for (int i = m1+1; i <= 12; ++i) {
            sum+=months[isleapyear(y1)][i];
        }
        for (int i = y1+1; i < y2; ++i) {
            sum+=365+isleapyear(i);
        }
        for (int i = 1; i < m2; ++i) {
            sum+=months[isleapyear(y2)][i];
        }
        sum+=d2;
    }
    return sum;
}

日期相加(经过i天后是几号)
//结果存在result数组中，要自己设
void afterdate(int year, int month, int day, int days, int result[3])
{
    int day_of_year = day;
    for (int i = 1; i < month; i++)
    {
        day_of_year += Dayspermonth(year, i);
    }
    day_of_year += days;
    while (day_of_year > 365 + isleapyear(year))
    {
        day_of_year -= 365 + isleapyear(year);
        year++;
    }
    month = 1;
    while (day_of_year > Dayspermonth(year, month))
    {
        day_of_year -= Dayspermonth(year, month);
        month++;
        if (month > 12)
        {
            month = 1;
            year++;
        }
    }
    result[0] = year;
    result[1] = month;
    result[2] = day_of_year;
}